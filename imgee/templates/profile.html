{% extends "layout.html" %}
{% from 'baseframe/forms.html' import renderform %}

{% block title %}{{ profile.title }}{% endblock %}

{% block footerscripts %}
<script type="text/javascript" src="{{url_for('static', filename='js/jquery.jeditable.min.js')}}"></script>
<script> var profile = '{{g.user.profile_name}}'; </script>
<script type="text/javascript" src="{{url_for('static', filename='js/edit_in_place.js')}}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/list-grid.js') }}"></script>

<script type="text/javascript">
  var count = $('.expandable1').children().length;
  if( count <= 3){
      $('.more1').hide();
      $('.expandable1').css('height', 'auto');
  }
  if( count > 3){
      $('.more1').show();
      $('.expandable1').css('height', '80');
  }
  $(".more1").click(function(){
    var val = $(this).text();
    if (val == "More") {
      $(".expandable1").css('height', '100%');
      $(this).text("Less");
    } else {
      $(".expandable1").css('height', '80');
      $(this).text("More");
    }
    return false;
  });
   $(".more2").click(function(){
    var val = $(this).text();
    if (val == "More") {
      $(".expandable2").css('height', '100%');
      $(this).text("Less");
    } else {
      $(".expandable2").css('height', '80');
      $(this).text("More");
    }
    return false;
  });
</script>

{% endblock %}

{% block maincontent %}
    <div class="span9">
        {{ title_form.hidden_tag() }}
        {% if files %}
            <div class="row">
                <div class="list-grid-selector span9">
                    <div class="btn-group">
                        <a href="#" id="gridview" class="btn switcher active"><i class="icon-th-large"></i></a>
                        <a href="#" id="listview" class="btn switcher"><i class="icon-list"></i></a>
                    </div>
                </div>
            </div>
        {% endif %}

        {% if unlabelled %}
            {% if profile.labels %}
                <div class="heading note">Unlabeled-image Archive</div>
            {% else %}
                <div class="heading note">Archived Images</div>
            {% endif %}
            <br />
        {% endif %}

        <div class="row">
            <div class="albumpage span9">
                {% if files %}
                    <div class="gallery">
                        <ul id="showcase" class="grid">
                            <div id="row-ctrl">
                                <section class="top">
                                    <div class="span1">Image</div>
                                    <div class="span3">Title</div>
                                    <div class="span2">Uploaded at</div>
                                    <div class="span2">Labels</div>                                
                                </section>

                                {% for img in files %}
                                    <li class="image">
                                        <a href="{{url_for('view_image', profile=g.user.profile_name, image=img.name)}}" title="view image">
                                            <section class="left">
                                                <div class="image-thumb">    
                                                    <img src="{{url_for('get_thumbnail', profile=g.user.profile_name, image=img.name)}}"/>
                                                </div>
                                            </section>
                                        </a>
                                        <section class="right">
                                            <div class="row">   
                                                <a href="{{url_for('view_image', profile=g.user.profile_name, image=img.name)}}" title="view image">                                 
                                                    <div class="title editable_title span3" id="{{img.name}}">{{img.title}}</div>
                                                    <div class="span2 date">{{ img.created_at }}</div>
                                                </a>
                                                <div class="labels span2">
                                                    {% for label in img.labels %}
                                                        <span class="label">
                                                            <a href="{{url_for('show_label', profile=img.profile.name, label=label.name)}}">{{label.name}}</a>
                                                        </span>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </section> 
                                    </li>
                                {% endfor %}  
                            </div>                                        
                        </ul>
                    </div>
                {% else %}
                    <div class="well">
                        {% if unlabelled %}
                            Hurray! Not a single image is without a label.
                        {% else %}
                            There are no images uploaded yet. <a href="{{url_for('upload_file', profile=g.user.profile_name)}}">Upload them.</a>
                        {% endif %}
                    </div>
                {% endif %}            
            </div>
        </div>
    </div>
{% endblock %}




{% extends "layout.html" %}
{% from 'baseframe/forms.html' import renderform %}

{% block title %}{{ profile.title }}{% endblock %}

{% block footerscripts %}
<script type="text/javascript" src="{{url_for('static', filename='js/jquery.jeditable.min.js')}}"></script>
<script> var profile = '{{profile.name}}'; </script>
<script type="text/javascript" src="{{url_for('static', filename='js/edit_in_place.js')}}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/list-grid.js') }}"></script>
<script type="text/javascript">
  <script type="text/javascript">
    $(function() {
    Dropzone.options.uploadimage = {
      paramName: "file"
      };
    });
  </script>
</script>
{% endblock %}

{% block maincontent %}
  <section class="profile">
    {{ title_form.hidden_tag() }}
    {% if files %}
      <div class="row">
        <div class="list-grid-selector span7">
          <div class="btn-group">
            <a href="#" id="gridview" class="btn switcher active"><i class="icon-th-large"></i></a>
            <a href="#" id="listview" class="btn switcher"><i class="icon-list"></i></a>
          </div>
        </div>
        <div class="span2">
                  <!-- POPUP DEMO -->
        <div class="row">
          <a href="#myModal" role="button" class="btn span2" data-toggle="modal">Demo Popup</a>
          <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-body">
              <iframe src="{{ url_for('pop_up_gallery', profile=profile.name)}}" width="980px" height="405px"></iframe>
            </div>
            <div class="modal-footer">
              <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            </div>
          </div>
        </div>
        <!-- /POPUP DEMO -->

        </div>
      </div>
    {% endif %}
        
    {% if unlabelled %}
      {% if profile.labels %}
        <div class="heading note">Unlabeled-image Archive</div>
      {% else %}
        <div class="heading note">Archived Images</div>
      {% endif %}
      <br />
    {% endif %}

    <div class="row">
      <div class="spann9">
        {% if files %}
          <div class="gallery">
            <ul id="showcase" class="grid">
              <div id="row-ctrl">
                <section class="top">
                  <div class="span1 top1">Image</div>
                  <div class="span3 top2">Title</div>
                  <div class="span2 top3">Uploaded at</div>
                  <div class="span1 top4">Size</div>
                  <div class="span2 top5">Aspect ratio</div>
                </section>

                {% for img in files %}
                  <li class="image">
                    <a href="{{url_for('view_image', profile=profile.name, image=img.name)}}" title="view image">
                      <section class="left">
                        <div class="image-thumb">    
                          <img src="{{url_for('get_thumbnail', image=img.name)}}"/>
                        </div>
                      </section>
                    </a>
                    
                    <section class="right span8">
                      <div class="row">   
                        <a href="{{url_for('view_image', profile=profile.name, image=img.name)}}" title="view image">                                 
                          <div class="title editable_title span3 list2" id="{{img.name}}">{{img.title}}</div>
                          <div class="span2 date list3">{{ img.created_at }}</div>
                          <div class="span1 date list4">{{ (img.size/1024) | round(2) }} KB</div>
                          <div class="span2 date list5">{{ img.width }} x {{ img.height }} px</div>
                        </a>
                      </div>
                    </section> 
                  </li><!-- /image -->
                {% endfor %}  
              </div><!-- /row-ctrl -->
            </ul><!-- showcase -->
          </div><!-- gallery-->
        {% else %}
          <div class="well">
            <div class="span8">
            {% if unlabelled %}
              Hurray! Not a single image is without a label.
            {% else %}
              There are no images uploaded yet. <a href="{{url_for('upload_file', profile=profile.name)}}">Upload them.</a>
            {% endif %}
            </div>
          </div>
        {% endif %}
      </div><!-- /span9 -->
    </div><!-- /row -->
  </section><!-- /profile -->
{% endblock %}

